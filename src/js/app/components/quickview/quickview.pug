<div>
    <div class="shadow"></div>

    <div class="quickview" ref="quickviewPanel">
        <header class="quickview-header">
            <div class="quickview-close">
                <a href="#" @click="$emit('outside-click')"><svg class="icon icon-cross"><use xlink:href="#round-cross"></use></svg></a>
            </div>
            <h1 class="quickview-title">Site de {{ town.city.name }}</h1>
            <h2 class="quickview-subtitle">{{ town.address }}</h2>
        </header>

        <footer class="quickview-footer">
            <button class="button secondary" @click="showTown">Voir le détail</button>
        </footer>

        <section>
            <header class="notification full-width">Démographie</header>
            <p><strong>Nombre de personnes :</strong> {{ town.populationTotal !== null ? town.populationTotal : 'inconnu' }}</p>
            <p><strong>Nombre de ménages :</strong> {{ town.populationCouples !== null ? town.populationCouples : 'inconnu' }}</p>
            <p><strong>Nombre de mineurs :</strong> {{ town.populationMinors !== null ? town.populationMinors : 'inconnu' }}</p>
            <p><strong>Origines :</strong> {{ town.socialOrigins.length > 0 ? town.socialOrigins.map(origin => (origin.label)).join(', ') : 'inconnu' }}</p>
        </section>

        <section>
            <header class="notification full-width">Conditions de vie</header>
            <p><strong>Accès à l'eau :</strong> {{ town.accessToWater === true ? 'oui' : (town.accessToWater === false ? 'non' : 'inconnu') }}</p>
            <p><strong>Accès à l'électricité :</strong> {{ town.accessToElectricity === true ? 'oui' : (town.accessToElectricity === false ? 'non' : 'inconnu') }}</p>
            <p><strong>Évacuation des déchets :</strong> {{ town.trashEvacuation === true ? 'oui' : (town.trashEvacuation === false ? 'non' : 'inconnu') }}</p>
        </section>

        <section>
            <header class="notification full-width">Actions menées sur le site</header>
            <table class="table" v-if="town.actions.length">
                <thead>
                    <tr>
                        <th>Type d'action</th>
                        <th>Action débutée</th>
                        <th>Opérateur</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="action in town.actions" class="action" @click="showAction(action.id)">
                        <td>{{ action.type }}</td>
                        <td>{{ new Date(action.startedAt * 1000).toLocaleDateString().substr(0, 10) }}</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

            <p v-else>Aucune action déclarée pour le moment</p>
        </section>
    </div>
</div>